from RoadGraph.StdRoadGraph import StdRoadGraph
from RoadGraph.util import grid_for_shpfile, bounds_of_shpfile
from RoadGraph.StdColNames import *


def calculate_shortest_paths_between_sites(graph: StdRoadGraph):
    grid = grid_for_shpfile(graph.edges, 5)
    bounds = bounds_of_shpfile(grid)
    within_bounds = graph.key_sites[STD_GEOMETRY].apply(lambda x: x.within(bounds.loc[0, STD_GEOMETRY]))
    sites_within_bounds = graph.key_sites.loc[within_bounds == True, :]
    return bounds, sites_within_bounds